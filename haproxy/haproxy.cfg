global
    daemon
    maxconn 10000

defaults
    mode tcp
    timeout connect 5s
    timeout client 50s
    timeout server 50s

frontend stats
    mode http
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 10s
    stats admin if TRUE

# Client-facing ports (Redis client connections)
frontend redis_clients_1
    bind *:9001
    default_backend redis_nodes_1
frontend redis_clients_2
    bind *:9002
    default_backend redis_nodes_2
frontend redis_clients_3
    bind *:9003
    default_backend redis_nodes_3
frontend redis_clients_4
    bind *:9004
    default_backend redis_nodes_4
frontend redis_clients_5
    bind *:9005
    default_backend redis_nodes_5
frontend redis_clients_6
    bind *:9006
    default_backend redis_nodes_6

# Cluster bus ports (Redis node-to-node communication)
frontend redis_cluster_1
    bind *:9101
    default_backend redis_nodes_1
frontend redis_cluster_2
    bind *:9102
    default_backend redis_nodes_2
frontend redis_cluster_3
    bind *:9103
    default_backend redis_nodes_3
frontend redis_cluster_4
    bind *:9104
    default_backend redis_nodes_4
frontend redis_cluster_5
    bind *:9105
    default_backend redis_nodes_5
frontend redis_cluster_6
    bind *:9106
    default_backend redis_nodes_6

# Backend definitions (Redis nodes)
backend redis_nodes_1
    server redis1 redis-node-1:6379 check
backend redis_nodes_2
    server redis2 redis-node-2:6379 check
backend redis_nodes_3
    server redis3 redis-node-3:6379 check
backend redis_nodes_4
    server redis4 redis-node-4:6379 check
backend redis_nodes_5
    server redis5 redis-node-5:6379 check
backend redis_nodes_6
    server redis6 redis-node-6:6379 check
